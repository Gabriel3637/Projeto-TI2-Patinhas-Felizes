<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Animais</title>
    <link rel="stylesheet" href="./style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <header>
        <div class="home">
            <a href="./telainicialONG.html">
                <img src="../imagens/patinhaLogo.png" alt="logo" class="logo">
            </a>
        </div>
        <nav>
            <a href="./requerimentos.html">Requerimentos</a>
            <a href="./editarONG.html">
                <img src="../imagens/user_icon.png" alt="user-icon" class="logo">
            </a>
        </nav>
    </header>
    <main>
        <img src="../imagens/gatocarregando-unscreen.gif" alt="Carregando" id="GV_imagemdesitecarregando" class="GV_sitecarregando">
        <div class="GV_titulodapagindex">
          <h1>Animais</h1>
        </div>
        <section class="animal-catalog" id="animal-catalog">
            
            <div class="animal-container GV_containerindexespecial">
                <div class="animal-grid" id="animal-grid">
                    <!-- Animal cards serão inseridos aqui pelo JavaScript -->
                </div>
            </div>
        </section>
        <section id="edit-animal" style="display: none; min-width: 50%;">  
            
            <div class="container GV_containerformularioprincipal">
                <div class="row div-titulo GV_tituloformulario">
                  <h3 class="titulo">Editar Animal</h3>
                </div>
          
                <div class="row fill_green GV_divformformulario">
                  <!--<h1 id="questionario">Questionário</h1>-->
                  <h1 id="questionario2"></h1>
                  <div class="row">
                    <div id="LCmsg" class="col-sm-10 offset-sm-1 ">
                        <!--Mensagem de erro-->
                    </div>
                  </div>
                  <form id="questionForm">

                    <input type="hidden" id="animal-id" name="id">
                    <div class="row align-items-center">
                      <div class="col-lg-6 col-xs-12">
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputNome" class="HG_label_box col-sm-2">Nome:</label>
                          <div class="col GV_inputsformulario">
                            <input type="text" class="form-control" id="inputNome" required placeholder="Informe seu nome" name="nome">
                          </div>
                        </div>
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputImagem" class="HG_label_box col-sm-2">Imagem:</label>
                          <div class="col GV_inputsformulario">
                            <input class="form-control" type="url" name="imagem" id="inputImagem" placeholder="Link da imagem">
                          </div>
                        </div>
          
                        <div class="GV_mostrarimgpet">
                          <img src="../imagens/images.png" alt="" id="GV_imgdoanimalmostrar">
                        </div>
          
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputRaca" class="HG_label_box col-sm-2">Raça:</label>
                          <div class="col GV_inputsformulario">
                            <input type="text" class="form-control" id="inputRaca" required placeholder="Vira-lata, pinscher..." name="raca">
                          </div>
                        </div>
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputVacinas" class="HG_label_box col-sm-2">Vacinas:</label>
                          <div class="col GV_inputsformulario">
                            <input class="form-control" type="text" name="vacinas" id="inputVacinas" placeholder="Vacinas">
                          </div>
                        </div>
          
                      </div>
                        
          
                      <div class="col-lg-6 col-xs-12">
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputNascimento" class="HG_label_box col-sm-2">Nascimento:</label>
                          <div class="col GV_inputsformulario">
                                <input type="date" class="form-control" id="inputNascimento" required placeholder="Digite sua idade" name="datanascimento">
                          </div>
                        </div>
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputEntrada" class="HG_label_box col-sm-2">Entrada:</label>
                          <div class="col GV_inputsformulario">
                                <input type="date" class="form-control" id="inputEntrada" required placeholder="Data de entrada no sistema" name="dataentrada">
                          </div>
                        </div>
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputSexo" class="HG_label_box col-sm-2">Sexo:</label>
                          <div class="col GV_radio_petsexo GV_inputsformulario">
                            <span>
                              <input type="radio" name="sexo" id="GV_sexmacho" value="M" checked>
                              <label for="GV_sexmacho" class="GV_pet_sexo">Macho</label>
                            </span>
                            <span>
                              <input type="radio" name="sexo" id="GV_sexfemea" value="F">
                              <label for="GV_sexfemea" class="GV_pet_sexo">Fêmea</label>
                            </span>
                          </div>
                        </div>
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputPorte" class="HG_label_box col-sm-2">Porte:</label>
                          <div class="col GV_radio_petporte">
                            <span>
                              <input type="radio" name="porte" id="GV_portepeq" value="P" checked>
                              <label for="GV_portepeq" class="GV_pet_porte">Pequeno</label>
                            </span>
                            <span>
                              <input type="radio" name="porte" id="GV_portemed" value="M">
                              <label for="GV_portemed" class="GV_pet_porte">Médio</label>
                            </span>
                            <span>
                              <input type="radio" name="porte" id="GV_portegra" value="G">
                              <label for="GV_portegra" class="GV_pet_porte">Grande</label>
                            </span>
                          </div>
                        </div>
          
                        <div class="form-group row align-items-center mb-3">
                          <label for="inputCastrado" class="HG_label_box col-sm-2">Castrado:</label>
                          <div class="col GV_radiocastrado">
                            <span>
                              <input type="radio" name="castrado" id="GV_true" value="true" checked>
                              <label for="GV_true" class="GV_petfoicastrado">Sim</label>
                            </span>
                            <span>
                              <input type="radio" name="castrado" id="GV_false" value="false">
                              <label for="GV_false" class="GV_petfoicastrado">Não</label>
                            </span>
                          </div>
                        </div>

                        <div class="form-group row align-items-center mb-3 GV_box_etiquetaspet">
                          <label for="inputEspecie" class="HG_label_box col-12">Espécie:</label>
                          <div class="row GV_checkbox_etiquetas">
                            <div class="col-6">
                              <input type="radio" name="especie" id="GV_cachorro" value="CA" checked>
                              <label for="GV_cachorro" class="GV_pet_tags">Cachorro</label><br>
                              <input type="radio" name="especie" id="GV_Gato" value="GA">
                              <label for="GV_Gato" class="GV_pet_tags">Gato</label><br>
                            </div>
                            <div class="col-6">
                              <input type="radio" name="especie" id="GV_Coelho" value="CO">
                              <label for="GV_Coelho" class="GV_pet_tags">Coelho</label><br>
                              <input type="radio" name="especie" id="GV_Roedor" value="RO">
                              <label for="GV_Roedor" class="GV_pet_tags">Roedor</label><br>
                            </div>
                          </div>
                        </div>
          
                        <div class="row align-items-center mb-3 GV_box_etiquetaspet">
                          <label for="inputCastrado" class="HG_label_box col-12">Etiquetas:</label>
                          <div class="row GV_checkbox_etiquetas">
                            <div class="col-6">
                              <input type="checkbox" name="etiquetas" id="GV_tags_Animado" value="Brincalhao">
                              <label for="GV_tags_Animado" class="GV_pet_tags">Brincalhao</label><br>
                              <input type="checkbox" name="etiquetas" id="GV_tags_Caminhar" value="Gosta de caminhar">
                              <label for="GV_tags_Caminhar" class="GV_pet_tags">Gosta de caminhar</label><br>
                              <input type="checkbox" name="etiquetas" id="GV_tags_Extrovertido" value="Extrovertido">
                              <label for="GV_tags_Extrovertido" class="GV_pet_tags">Extrovertido</label>
                            </div>
                            <div class="col-6">
                              <input type="checkbox" name="etiquetas" id="GV_tags_Calmo" value="Calmo">
                              <label for="GV_tags_Calmo" class="GV_pet_tags">Calmo</label><br>
                              <input type="checkbox" name="etiquetas" id="GV_tags_Caseiro" value="Caseiro">
                              <label for="GV_tags_Caseiro" class="GV_pet_tags">Caseiro</label><br>
                              <input type="checkbox" name="etiquetas" id="GV_tags_Introvertido" value="Introvertido">
                              <label for="GV_tags_Introvertido" class="GV_pet_tags">Introvertido</label><br>
                            </div>
                          </div>
                        </div>
                      </div>
                        
          
          
                    </div>
                        <div class="form-group row align-items-center mb-3 GV_divcaixatextocadastro">
                          <label for="inputDescriçao" class="HG_label_box col-12">Descrição:</label>
                          <div class="col GV_inputsformulario">
                            <textarea name="descricao" id="inputDescriçao" placeholder="Descreva o animal"></textarea>
                          </div>
                        </div>
          
                        <div class="form-group row align-items-center mb-3 GV_divcaixatextocadastro">
                          <label for="inputHistoria" class="HG_label_box col-12">Hitória:</label>
                          <div class="col GV_inputsformulario">
                            <textarea name="historia" id="inputHistoria" placeholder="Descreva a historia do animal"></textarea>
                          </div>
                        </div>
                      </div>
                    
                    <div class="form-group row align-items-center">
                      <div class="col-sm-12 text-center"><h1></h1></div>
                      <div class="col-sm-12 text-center">
                        <button type="submit" class="btn btn-success" id="btnInsert">Editar</button>
                        <input type="button" class="btn btn-secondary" id="btnClear" value="Limpar">
                        <button class="btn btn-warning" onclick="cancelarEdicao()">Cancelar</button>
                      </div>
                    </div>
                  </form>
                </div>
            
            <!--<h1 id="form-title">Cadastrar Animal</h1>
            <form id="edit-form">
                <input type="hidden" id="animal-id">

                <div class="container">

                    <div class="row">

                        <div class="container">

                            <div class="row">
                                <label class="col-5 label-edit" for="especie">Espécie (CA/GA/CO/RO):</label>
                                <input type="text" id="especie" name="especie" class="col-7 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="nome">Nome:</label>
                                <input type="text" id="nome" name="nome" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="imagem">Imagem (url):</label>
                                <input type="text" id="imagem" name="imagem" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="descricao">Descrição:</label>
                                <input type="text" id="descricao" name="descricao" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="sexo">Sexo (M/F):</label>
                                <input type="text" id="sexo" name="sexo" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="idade">Idade:</label>
                                <input type="text" id="idade" name="idade" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="raca">Raça:</label>
                                <input type="text" id="raca" name="raca" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="porte">Porte (P/M/G):</label>
                                <input type="text" id="porte" name="porte" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="castrado">Castrado (true/false):</label>
                                <input type="text" id="castrado" name="castrado" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="vacinado">Vacinado:</label>
                                <input type="text" id="vacinado" name="vacinado" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="historia">História:</label>
                                <input type="text" id="historia" name="historia" class="col-8 input-edit"><br>
                                <!--<textarea id="historia" name="historia" ></textarea><br>
                            </div>
                            <div class="row">
                                <label class="col-4 label-edit" for="tags">Tags:</label>
                                <input type="text" id="tags" name="tags" class="col-8 input-edit"><br>
                            </div>
                            <div class="row">
                              <div class="col-6 text-end">
                                <button class="salvar-edit btn btn-success" onclick="editarAnimal()">Salvar</button>
                              </div>
                              <div class="col-6">
                                
                              </div>
                            </div>

                        </div>

                    </div>

                </div>
            </form>-->




        </section>
      
    </main>
    <footer class="footer-estilizadoJP">
        <div>
            <p>&copy; <span id="dataJP"></span> Patinhas Felizes</p>
            <p>Conexão entre ONGs e Adotantes!</p>
        </div>
    </footer>
    <script src="../script-bd/script.js"></script>
    <script>
        $(document).ready(function () {
            carregarAnimais();
        });

        async function lerAnimais() {
            let animais = [];
            try {
                const resposta = await fetch(apiUrlJP);
                if (resposta.ok) {
                    animais = await resposta.json();
                } else {
                    throw new Error("Erro ao buscar animais");
                }
            } catch (erro) {
                console.error("Erro ao ler animais:", erro);
                throw new Error("Servidor não encontrado!");
            }
            return animais;
        }

      async function lerAnimal(id) {
          let animal = {};
          try {
              const resposta = await fetch(`${apiUrlJP}/${id}`);
              if (resposta.ok) {
                    animal = await resposta.json();
              } else {
                  throw new Error("Erro ao buscar animal");
              }
          } catch (erro) {
              console.error("Erro ao ler animal:", erro);
              throw new Error("Servidor não encontrado!");
          }
          return animal;
      }

        async function carregarAnimais() {
          let imagemcarregando = document.getElementById("GV_imagemdesitecarregando");
          try{
            const gradeAnimais = document.getElementById('animal-grid');
            const animais = await lerAnimais();
            
            if (!gradeAnimais) return;
            
            // Limpa a grade
            gradeAnimais.innerHTML = '';

            if (animais.length > 0) {
                // Adiciona cartões de animais
                for ( let x = 0; x < animais.length; x++ )
                {
                    let animal = animais[x];
                    const cartaoAnimal = document.createElement('div');
                    cartaoAnimal.className = 'animal-card';
                    cartaoAnimal.setAttribute('id', animal.id);
                    cartaoAnimal.innerHTML = `
                        <div class="GV_animaisongcrud">
                            <div>
                                <img src="${animal.imagem}" alt="${animal.nome}" class="animal-img GV_imagemexibiranimais">
                            </div>
                            <p class="label-box">${animal.nome}</p>
                        </div>
                        <div class="crud-buttons">
                            <button onclick="mostrarEditarAnimal(${animal.id})"><span class="material-symbols-outlined">
edit
</span></button>
                            <button onclick="deletarAnimal(${animal.id})"><span class="material-symbols-outlined">
delete
</span></button>
                        </div>
                    `;
                    gradeAnimais.appendChild(cartaoAnimal)
                }
            }

            const adicionarCartaoAnimal = document.createElement('div');
            adicionarCartaoAnimal.className = 'add-animal-card';
            adicionarCartaoAnimal.innerHTML = '+';
            adicionarCartaoAnimal.onclick = () => window.location.href = './cadastraranimal.html';
            gradeAnimais.appendChild(adicionarCartaoAnimal);
            // Preenche espaços vazios com o botão '+' e adiciona o evento de redirecionamento
            /*while (gradeAnimais.children.length < 40) {
                const adicionarCartaoAnimal = document.createElement('div');
                adicionarCartaoAnimal.className = 'add-animal-card';
                adicionarCartaoAnimal.innerHTML = '+';
                adicionarCartaoAnimal.onclick = () => window.location.href = '/../modules/TelaCadastroAnimalONG/teladecadastrodeanimaONG.html';
                gradeAnimais.appendChild(adicionarCartaoAnimal);
            }*/
            imagemcarregando.classList.add("GV_esconder");
          }catch(error){
            imagemcarregando.setAttribute("src", "../imagens/icone_error.png");
            imagemcarregando.style.width = "80px";
          }
        }

        function exibirMensagem(mensagem) {
            const msg = document.getElementById('msg');
            if (msg) {
                msg.innerHTML = `<div class="alert alert-warning">${mensagem}</div>`;
            }
        }
/*
        async function atualizarAnimal(id, animal) {
          console.log(id, animal);
            try {
                const resposta = await fetch(`${apiUrlJP}/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(animal),
                });
                if (resposta.ok) {
                    exibirMensagem("Sucesso ao editar animal!");
                } else {
                    throw new Error("Erro ao editar animal");
                }
            } catch (erro) {
                console.error("Erro ao editar animal:", erro);
                exibirMensagem("Erro ao editar animal (servidor JSON indisponível).");
            }
        } */

        async function salvarAnimal(event) {
            event.preventDefault();
            const id = document.getElementById('animal-id').value;
            const animal = {
                sexo: document.getElementById('sexo').value,
                idade: document.getElementById('idade').value,
                raca: document.getElementById('raca').value,
                historia: document.getElementById('historia').value,
                tags: document.getElementById('tags').value.split(',').map(tag => tag.trim())
            };

            if (id) {
                await atualizarAnimal(id, animal);
            } else {
                await criarAnimal(animal);
            }

            cancelarEdicao();
            recarregarGradeAnimais();
        }

        async function criarAnimal(animal) {
            try {
                const resposta = await fetch(apiUrlJP, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(animal),
                });
                if (resposta.ok) {
                    exibirMensagem("Sucesso ao criar animal!");
                } else {
                    throw new Error("Erro ao criar animal");
                }
            } catch (erro) {
                console.error("Erro ao criar animal:", erro);
                exibirMensagem("Erro ao criar animal (servidor JSON indisponível).");
            }
        }

        async function deletarAnimal(id) {
            const confirmacao = confirm(`Tem certeza que deseja excluir o animal com ID: ${id}?`);
            if (confirmacao) {
              let imagemcarregando = document.getElementById("GV_imagemdesitecarregando");
                try {
                    imagemcarregando.classList.remove("GV_esconder");
                    const resposta = await fetch(`${apiUrlJP}/${id}`, {
                        method: 'DELETE',
                    });
                    if (resposta.ok) {
                        exibirMensagem("Sucesso ao excluir animal!");
                        recarregarGradeAnimais();
                    } else {
                        throw new Error("Erro ao excluir animal");
                    }
                    imagemcarregando.classList.add("GV_esconder");
                } catch (erro) {
                    imagemcarregando.setAttribute("src", "../imagens/icone_error.png");
                    imagemcarregando.style.width = "80px";
                    console.error("Erro ao excluir animal:", erro);
                    exibirMensagem("Erro ao excluir animal (servidor JSON indisponível).");
                }
            }
        }

        function cancelarEdicao() {
            document.getElementById('animal-catalog').style.display = 'block';
            document.getElementById('edit-animal').style.display = 'none';
            document.getElementById('edit-form').reset();
            document.getElementById('form-title').innerText = 'Cadastrar Animal';
        }

        function mostrarFormularioEdicao() {
            document.getElementById('animal-catalog').style.display = 'none';
            document.getElementById('edit-animal').style.display = 'block';
        }

        async function mostrarEditarAnimal(id) {
            let imagemcarregando = document.getElementById("GV_imagemdesitecarregando");
            try{
              imagemcarregando.classList.remove("GV_esconder");
              const animal = await lerAnimal(id);
              if (Object.keys(animal).length > 0) {
                  const GV_imgmostrar = document.getElementById("GV_imgdoanimalmostrar");
                  const GV_inputimgdoanimal = document.getElementById("inputImagem");
                  /*
                  APAGA
                  document.getElementById('form-title').innerText = 'Editar Animal';*/
                  
                  document.getElementById('animal-id').value = animal.id;
                  document.getElementById('inputNome').value = animal.nome;
                  document.getElementById('inputImagem').value = animal.imagem;
                  document.querySelector(`input[name='especie'][value='${animal.especie}']`).checked = true;
                  document.getElementById('inputRaca').value = animal.raca;
                  document.getElementById('inputVacinas').value = animal.vacinas;
                  document.getElementById('inputNascimento').value = animal.datanascimento;
                  document.getElementById('inputEntrada').value = animal.dataentrada;

                  document.getElementById('inputDescriçao').value = animal.descricao;
                  document.getElementById('inputHistoria').value = animal.historia;

                  document.querySelector(`input[name='sexo'][value='${animal.sexo}']`).checked = true;
                  document.querySelector(`input[name='porte'][value='${animal.porte}']`).checked = true;
                  document.querySelector(`input[name='castrado'][value='${animal.castrado}']`).checked = true;
                  animal.etiquetas.forEach(function(GV_elemento){
                      document.querySelector(`input[name='etiquetas'][value='${GV_elemento}']`).checked = true;
                  });

                  GV_imgmostrar.setAttribute("src", GV_inputimgdoanimal.value);

                  mostrarFormularioEdicao();
              }
              imagemcarregando.classList.add("GV_esconder");
            }catch(error){
              console.log(error);
              imagemcarregando.setAttribute("src", "../imagens/icone_error.png");
              imagemcarregando.style.width = "80px";
            }
        }
        const GV_inputnascimento = document.querySelector("#inputNascimento");
        const GV_inputentrada = document.querySelector("#inputEntrada");
        const GV_imgmostrar = document.getElementById("GV_imgdoanimalmostrar");
        const GV_inputimgdoanimal = document.getElementById("inputImagem");

        function setaromaxdodate(campo){
            let GV_inputdata = campo;
            let GV_hoje = new Date();
            let GV_diaatual = (GV_hoje.getDate()).toString().padStart(2, '0');
            let GV_messtual = (GV_hoje.getMonth() + 1).toString().padStart(2, '0');
            let GV_anoatual = GV_hoje.getFullYear();

            var GV_datestring = `${GV_anoatual}-${GV_messtual}-${GV_diaatual}`;
            GV_inputdata.setAttribute("max", GV_datestring);
        }

        GV_inputnascimento.addEventListener("focus", ()=>{
            setaromaxdodate(GV_inputnascimento);
        })
        GV_inputentrada.addEventListener("focus", ()=>{
            setaromaxdodate(GV_inputentrada);
        })
        GV_inputimgdoanimal.addEventListener("blur", ()=>{
            GV_imgmostrar.setAttribute("src", GV_inputimgdoanimal.value);
        })

      async function atualizarAnimal (id, objAnimal) {
        console.log(objAnimal);
          //  tentar fazer a chamada
          try {
              //  definir a chamada HTTP do JSON Server
              const response = await fetch(`${apiUrlJP}/${id}`, {
                  method: 'PUT',
                  headers: {
                      'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(objAnimal),
              });
          }
          //  chamada de erro
          catch (error) {
              console.error("Error:", error);
          }
      } // end updateComment ( )
      
        const formulario_animal = document.getElementById('questionForm');
        formulario_animal.addEventListener('submit', (event)=>{
            event.preventDefault();
            editarAnimal();
            
            
        });

        async function editarAnimal () {
          let imagemcarregando = document.getElementById("GV_imagemdesitecarregando");
          try{
            imagemcarregando.classList.remove("GV_esconder");
            imagemcarregando.setAttribute("src", "../imagens/gatocarregando-unscreen.gif");
            let objAnimal = await lerAnimal(document.getElementById('animal-id').value);
            let GV_animal = new FormData(formulario_animal);
            let GV_obj_animal = Object.fromEntries(GV_animal);
            GV_obj_animal.etiquetas = new FormData(formulario_animal).getAll('etiquetas');
            GV_obj_animal.id = objAnimal.id;
            GV_obj_animal.donoid = objAnimal.donoid;
            GV_obj_animal.datasaida = objAnimal.datasaida;

            console.log(GV_obj_animal);
            await atualizarAnimal(objAnimal.id, GV_obj_animal);
            window.location.href = "./telainicialONG.html";
            imagemcarregando.classList.add("GV_esconder");
          }catch(error){
            imagemcarregando.setAttribute("src", "../imagens/icone_error.png");
            imagemcarregando.style.width = "80px";
          }
        }

        function recarregarGradeAnimais() {
            carregarAnimais();
        }

        document.getElementById('edit-form').addEventListener('submit', salvarAnimal);
    </script>
</body>
</html>