<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <title>Encontrei um Animal</title>
</head>

<body>
  
  <header>
    <div class="home">
      <a href="./telainicialONG.html">
        <img src="../imagens/patinhaLogo.png" alt="logo" class="logo">
      </a>
    </div>
    <nav>
      <a href="./doacao.html">Doar</a>
      <a href="./encontreiAnimal.html">Encontrei um Animal</a>
      <a href="./sobreONG.html">Sobre a ONG</a>
      <a href="./perfil.html">
        <img src="../imagens/user_icon.png" alt="user-icon" class="logo">
      </a>
    </nav>
  </header>

  <main>
    <img src="../imagens/gatocarregando-unscreen.gif" alt="Carregando" id="GV_imagemdesitecarregando" class="GV_sitecarregando GV_esconder">
    <div class="container GV_containerformularioprincipal">
      <div class="row div-titulo GV_tituloformulario">
        <h3 class="titulo">Cadastrar Animal</h3>
      </div>

      <div class="row fill_green GV_divformformulario">
        <!--<h1 id="questionario">Questionário</h1>-->
        <h1 id="questionario2"></h1>
        <div class="row">
          <div id="LCmsg" class="col-sm-10 offset-sm-1 ">
              <!--Mensagem de erro-->
          </div>
        </div>
        <form id="questionForm">
          <div class="row align-items-center">
            <div class="col-lg-6 col-xs-12">
              <div class="form-group row align-items-center mb-3">
                <label for="inputNome" class="HG_label_box col-sm-2">Nome:</label>
                <div class="col GV_inputsformulario">
                  <input type="text" class="form-control" id="inputNome" required placeholder="Informe seu nome" name="nome">
                </div>
              </div>

              <div class="form-group row align-items-center mb-3">
                <label for="inputImagem" class="HG_label_box col-sm-2">Imagem:</label>
                <div class="col GV_inputsformulario">
                  <input class="form-control" type="url" name="imagem" id="inputImagem" required placeholder="Link da imagem">
                </div>
              </div>

              <div class="GV_mostrarimgpet">
                <img src="../imagens/images.png" alt="" id="GV_imgdoanimalmostrar">
              </div>

              <div class="form-group row align-items-center mb-3">
                <label for="inputRaca" class="HG_label_box col-sm-2">Raça:</label>
                <div class="col GV_inputsformulario">
                  <input type="text" class="form-control" id="inputRaca" required placeholder="Vira-lata, pinscher..." name="raca">
                </div>
              </div>

              <div class="form-group row align-items-center mb-3">
                <label for="inputVacinas" class="HG_label_box col-sm-2">Vacinas:</label>
                <div class="col GV_inputsformulario">
                  <input class="form-control" type="text" name="vacinas" id="inputVacinas" placeholder="Vacinas">
                </div>
              </div>

            </div>
              

            <div class="col-lg-6 col-xs-12">

              <div class="form-group row align-items-center mb-3">
                <label for="inputNascimento" class="HG_label_box col-sm-2">Nascimento:</label>
                <div class="col GV_inputsformulario">
                      <input type="date" class="form-control" id="inputNascimento" required placeholder="Digite sua idade" name="datanascimento">
                </div>
              </div>

              <div class="form-group row align-items-center mb-3">
                <label for="inputEntrada" class="HG_label_box col-sm-2">Entrada:</label>
                <div class="col GV_inputsformulario">
                      <input type="date" class="form-control" id="inputEntrada" required placeholder="Data de entrada no sistema" name="dataentrada">
                </div>
              </div>

              <div class="form-group row align-items-center mb-3">
                <label for="inputSexo" class="HG_label_box col-sm-2">Sexo:</label>
                <div class="col GV_radio_petsexo GV_inputsformulario">
                  <span>
                    <input type="radio" name="sexo" id="GV_sexmacho" value="M" checked>
                    <label for="GV_sexmacho" class="GV_pet_sexo">Macho</label>
                  </span>
                  <span>
                    <input type="radio" name="sexo" id="GV_sexfemea" value="F">
                    <label for="GV_sexfemea" class="GV_pet_sexo">Fêmea</label>
                  </span>
                </div>
              </div>

              <div class="form-group row align-items-center mb-3">
                <label for="inputPorte" class="HG_label_box col-sm-2">Porte:</label>
                <div class="col GV_radio_petporte">
                  <span>
                    <input type="radio" name="porte" id="GV_portepeq" value="P" checked>
                    <label for="GV_portepeq" class="GV_pet_porte">Pequeno</label>
                  </span>
                  <span>
                    <input type="radio" name="porte" id="GV_portemed" value="M">
                    <label for="GV_portemed" class="GV_pet_porte">Médio</label>
                  </span>
                  <span>
                    <input type="radio" name="porte" id="GV_portegra" value="G">
                    <label for="GV_portegra" class="GV_pet_porte">Grande</label>
                  </span>
                </div>
              </div>

              <div class="form-group row align-items-center mb-3">
                <label for="inputCastrado" class="HG_label_box col-sm-2">Castrado:</label>
                <div class="col GV_radiocastrado">
                  <span>
                    <input type="radio" name="castrado" id="GV_true" value="true" checked>
                    <label for="GV_true" class="GV_petfoicastrado">Sim</label>
                  </span>
                  <span>
                    <input type="radio" name="castrado" id="GV_false" value="false">
                    <label for="GV_false" class="GV_petfoicastrado">Não</label>
                  </span>
                </div>
              </div>

              <div class="form-group row align-items-center mb-3 GV_box_etiquetaspet">
                <label for="inputEspecie" class="HG_label_box col-12">Espécie:</label>
                <div class="row GV_checkbox_etiquetas">
                  <div class="col-6">
                    <input type="radio" name="especie" id="GV_cachorro" value="CA" checked>
                    <label for="GV_cachorro" class="GV_pet_tags">Cachorro</label><br>
                    <input type="radio" name="especie" id="GV_Gato" value="GA">
                    <label for="GV_Gato" class="GV_pet_tags">Gato</label><br>
                  </div>
                  <div class="col-6">
                    <input type="radio" name="especie" id="GV_Coelho" value="CO">
                    <label for="GV_Coelho" class="GV_pet_tags">Coelho</label><br>
                    <input type="radio" name="especie" id="GV_Roedor" value="RO">
                    <label for="GV_Roedor" class="GV_pet_tags">Roedor</label><br>
                  </div>
                </div>
              </div>

              <div class="row align-items-center mb-3 GV_box_etiquetaspet">
                <label for="inputCastrado" class="HG_label_box col-12">Etiquetas:</label>
                <div class="row GV_checkbox_etiquetas">
                  <div class="col-6">
                    <input type="checkbox" name="etiquetas" id="GV_tags_Animado" value="Brincalhao">
                    <label for="GV_tags_Animado" class="GV_pet_tags">Brincalhao</label><br>
                    <input type="checkbox" name="etiquetas" id="GV_tags_Caminhar" value="Gosta de caminhar">
                    <label for="GV_tags_Caminhar" class="GV_pet_tags">Gosta de caminhar</label><br>
                    <input type="checkbox" name="etiquetas" id="GV_tags_Extrovertido" value="Extrovertido">
                    <label for="GV_tags_Extrovertido" class="GV_pet_tags">Extrovertido</label>
                  </div>
                  <div class="col-6">
                    <input type="checkbox" name="etiquetas" id="GV_tags_Calmo" value="Calmo">
                    <label for="GV_tags_Calmo" class="GV_pet_tags">Calmo</label><br>
                    <input type="checkbox" name="etiquetas" id="GV_tags_Caseiro" value="Caseiro">
                    <label for="GV_tags_Caseiro" class="GV_pet_tags">Caseiro</label><br>
                    <input type="checkbox" name="etiquetas" id="GV_tags_Introvertido" value="Introvertido">
                    <label for="GV_tags_Introvertido" class="GV_pet_tags">Introvertido</label><br>
                  </div>
                </div>
              </div>
            </div>
              


          </div>
              <div class="form-group row align-items-center mb-3 GV_divcaixatextocadastro">
                <label for="inputDescriçao" class="HG_label_box col-12">Descrição:</label>
                <div class="col GV_inputsformulario">
                  <textarea name="descricao" id="inputDescriçao" required placeholder="Descreva o animal"></textarea>
                </div>
              </div>

              <div class="form-group row align-items-center mb-3 GV_divcaixatextocadastro">
                <label for="inputHistoria" class="HG_label_box col-12">Hitória:</label>
                <div class="col GV_inputsformulario">
                  <textarea name="historia" id="inputHistoria" required placeholder="Descreva a historia do animal"></textarea>
                </div>
              </div>
            </div>
          
          <div class="form-group row align-items-center">
            <div class="col-sm-12 text-center"><h1></h1></div>
            <div class="col-sm-12 text-center">
              <button type="submit" class="btn btn-success" id="btnInsert">Enviar</button>
              <input type="button" class="btn btn-secondary" id="btnClear" value="Limpar">
            </div>
          </div>
        </form>
      </div>
    </div>
  </main>

  <footer class="footer-estilizadoJP">
    <div>
      <p>&copy; <span id="dataJP"></span> Patinhas Felizes</p>
      <p>Conexão entre ONGs e Adotantes!</p>
    </div>
  </footer>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="../script-bd/script.js"></script>
    <script>
      const formulario_animal = document.getElementById('questionForm');
      const GV_inputnascimento = document.querySelector("#inputNascimento");
      const GV_inputentrada = document.querySelector("#inputEntrada");
      const GV_imgmostrar = document.getElementById("GV_imgdoanimalmostrar");
      const GV_inputimgdoanimal = document.getElementById("inputImagem");
      const GV_btnclear = document.getElementById("btnClear");

      GV_inputimgdoanimal.addEventListener("blur", ()=>{
        GV_imgmostrar.setAttribute("src", GV_inputimgdoanimal.value);
      })


      formulario_animal.addEventListener('submit', async (event)=>{
        let imagemcarregando = document.getElementById("GV_imagemdesitecarregando");
        event.preventDefault();
        try{
          imagemcarregando.classList.remove("GV_esconder");
          let GV_animal = new FormData(formulario_animal);
          let GV_obj_animal = Object.fromEntries(GV_animal);
          GV_obj_animal.etiquetas = new FormData(formulario_animal).getAll('etiquetas');
          GV_obj_animal.id = Date.now().toString();
          GV_obj_animal.donoid = null;
          GV_obj_animal.datasaida = null;

          await criarAnimal(GV_obj_animal);
          console.log(GV_obj_animal);
          
          window.location.href = "./telainicialONG.html"
          imagemcarregando.classList.add("GV_esconder");
        }catch(error){
          imagemcarregando.classList.add("GV_esconder");
          LCdisplayMessage(`ERRO: Servidor nao encontrado!`);
        }
      });

      function setaromaxdodate(campo){
        let GV_inputdata = campo;
        let GV_hoje = new Date();
        let GV_diaatual = (GV_hoje.getDate()).toString().padStart(2, '0');
        let GV_messtual = (GV_hoje.getMonth() + 1).toString().padStart(2, '0');
        let GV_anoatual = GV_hoje.getFullYear();

        var GV_datestring = `${GV_anoatual}-${GV_messtual}-${GV_diaatual}`;
        GV_inputdata.setAttribute("max", GV_datestring);
      }

      GV_inputnascimento.addEventListener("focus", ()=>{
        setaromaxdodate(GV_inputnascimento);
      })
      GV_inputentrada.addEventListener("focus", ()=>{
        setaromaxdodate(GV_inputentrada);
      })

      GV_btnclear.addEventListener("click", ()=>{
        formulario_animal.reset()
      })

      /*$(document).ready(function () {
          init();
      });

      function init() {
          addEventListener('submit', (event)=>{
            event.preventDefault();
          });
          $("#btnInsert").click(function () {
              if (!$('#form-contato')[0].checkValidity()) {
                  LCdisplayMessage("Preencha o formulário corretamente.");
                  return;
              }

              if (senha !== confirma) {
                  LCdisplayMessage("As senhas não coincidem. Por favor, tente novamente.");
                  return;
              }

              let animal = {
                  id: Date.now().toString(),
                  nome: $("#inputNome").val(),
                  especie: $("#inputEspecie").val(),
                  raca: $("#inputRaca").val(),
                  sexo: $("#inputSexo").val(),
                  porte: $("#inputPorte").val(),
                  vacinado: $("#inputVacinados").val(),
                  descricao: $("#inputDescricao").val(),
                  historia: $("#inputHistoria").val(),
                  idade: $('#inputIdade').val(),
                  castrado: ('#inputCastrado').val(),
                  imagem: $("#inputImage").val(),
                  //etiquetas: $("#").val(),
              };
              
              createAnimal(animal);
              $("#form-contato")[0].reset();
              
              console.log(animal);
              LCdisplayMessage("Criado!");
          });

          $("#btnClear").click(function () {
              $("#form-contato")[0].reset();
          });
      }*/
      
               
  </script>
</body>

</html>
